var PagesSwipe,Page1Scroll,TabsScroll,$tabs,activeNav,$mask,body;var tab_press_call=false;$.fn.isOnScreen=function(){var c=$(window);var a={top:c.scrollTop(),left:c.scrollLeft()};a.right=a.left+c.width();a.bottom=a.top+c.height();var b=this.offset();b.right=b.left+this.outerWidth();b.bottom=b.top+this.outerHeight();return(!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom))};var pullDownEl,pullDownOffset,generatedCount=0;var current_tab=1;$(document).on("ready",function(){document.addEventListener("touchmove",function(i){i.preventDefault()},false);var g=$(".toggle-slide-left"),b=$(".close-menu");body=document.body;$mask=$("<div class='mask'></div>");g.on("tap",showSideMenu);$mask.on("tap",hideSideMenu);b.on("tap",hideSideMenu);var j=getViewportSize("w");var a=$(".page");var h=$(".pages");$tabs=$("ul.tabs").find("li");var d=0;h.css("width",a.length*j);a.css("width",j);a.css("height",getViewportSize("h")-100);for(var e=$tabs.length-1;e>=0;e--){console.log("tab_p"+(e+1)+" :: "+$tabs.eq(e).innerWidth());d+=$tabs.eq(e).innerWidth()}var c=a.length+10;$("ul.tabs").css("width",d+c);var k=document.querySelector("#wrapper");var f=new Hammer(k);f.on("swipeleft",function(l){var i=getViewportSize("w")*current_tab;current_tab++;h.velocity({translateX:-i+"px",translateY:0})});f.on("swiperight",function(n){var o=$(".pages").css("transform");var i=new WebKitCSSMatrix(o);var m=i.m41;current_tab--;var l=Math.abs(m)-getViewportSize("w");h.velocity({translateX:-l+"px",translateY:0});console.log(n.type+" gesture detected.")});TabsScroll=new IScroll(".sub-header-bar",{eventPassthrough:true,scrollX:true,scrollY:false,preventDefault:false});$(window).on("resize",function(){j=getViewportSize("w");h.css("width",a.length*j);a.css("width",j);a.css("height",getViewportSize("h")-100)});$tabs.on("tap",pressTab)});function getViewportSize(a){if(a==="w"){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}else{if(a==="h"){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}}function underline_tab(a){$el_li=$tabs.eq(a);$el_li.siblings().removeClass("activo");$el_li.addClass("activo")}function selectTab(a){console.log("esto es por el swipe");underline_tab(a);$el_li=$tabs.eq(a);if(!$el_li.isOnScreen()){console.log("entra");updateTabViewport(a)}}function pressTab(){var a=$tabs.index($(this));underline_tab(a);PagesSwipe.slide(a);tab_press_call=true}function updateTabViewport(a){TabsScroll.scrollToElement("#tab_p"+(a+1),null,true,null)}function showSideMenu(){body.classList.add("sml-open");body.appendChild($mask.get(0));activeNav="sml-open"}function hideSideMenu(){body.classList.remove(activeNav);activeNav="";body.removeChild($mask.get(0))};